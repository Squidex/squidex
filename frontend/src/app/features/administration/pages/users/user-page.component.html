<form [formGroup]="userForm.form" (ngSubmit)="save()">
    <input style="display: none" type="password" name="foilautofill" />

    <sqx-layout layout="right" width="30" white="true" padding="true" overflow="true">
        <ng-container title>
            @if (usersState.selectedUser | async) {
                <sqx-title message="i18n:users.editPageTitle"></sqx-title>
                <h3>{{ "users.editTitle" | sqxTranslate }}</h3>
            } @else {
                <sqx-title message="i18n:users.createPageTitle"></sqx-title>
                <h3>{{ "users.createTitle" | sqxTranslate }}</h3>
            }
        </ng-container>

        <ng-container menu>
            @if (usersState.selectedUser | async; as user) {
                @if (isEditable) {
                    <button class="btn btn-primary" type="submit" shortcut="CTRL + SHIFT + S">
                        {{ "common.save" | sqxTranslate }}
                    </button>
                }
            } @else {
                <button class="btn btn-primary" type="submit" shortcut="CTRL + SHIFT + S">
                    {{ "common.save" | sqxTranslate }}
                </button>
            }
        </ng-container>

        <ng-container>
            <sqx-form-error [error]="userForm.error | async"></sqx-form-error>

            <div class="form-group">
                <label for="email">
                    {{ "common.email" | sqxTranslate }}
                    <small class="hint">({{ "common.requiredHint" | sqxTranslate }})</small>
                </label>

                <sqx-control-errors for="email"></sqx-control-errors>

                <input class="form-control" id="email" type="email" maxlength="100" formControlName="email" autocomplete="off" />
            </div>
            <div class="form-group">
                <label for="displayName">
                    {{ "common.displayName" | sqxTranslate }}
                    <small class="hint">({{ "common.requiredHint" | sqxTranslate }})</small>
                </label>

                <sqx-control-errors for="displayName"></sqx-control-errors>

                <input
                    class="form-control"
                    id="displayName"
                    maxlength="100"
                    formControlName="displayName"
                    autocomplete="off"
                    spellcheck="false" />
            </div>

            <div class="form-group form-group-section">
                <div class="form-group">
                    <label for="password">{{ "common.password" | sqxTranslate }}</label>

                    <sqx-control-errors for="password"></sqx-control-errors>

                    <input
                        class="form-control"
                        id="password"
                        type="password"
                        maxlength="100"
                        formControlName="password"
                        autocomplete="off" />
                </div>

                <div class="form-group">
                    <label for="password">{{ "common.passwordConfirm" | sqxTranslate }}</label>

                    <sqx-control-errors for="passwordConfirm"></sqx-control-errors>

                    <input
                        class="form-control"
                        id="passwordConfirm"
                        type="password"
                        maxlength="100"
                        formControlName="passwordConfirm"
                        autocomplete="off" />
                </div>
            </div>

            <div class="form-group form-group-section">
                <label for="permissions">{{ "common.permissions" | sqxTranslate }}</label>

                <sqx-control-errors for="permissions"></sqx-control-errors>

                <textarea
                    class="form-control"
                    id="permissions"
                    formControlName="permissions"
                    placeholder="{{ 'common.separateByLine' | sqxTranslate }}"
                    autocomplete="off"
                    spellcheck="false"></textarea>
            </div>
        </ng-container>
    </sqx-layout>
</form>
