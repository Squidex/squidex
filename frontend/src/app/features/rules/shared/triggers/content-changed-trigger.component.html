<ng-container>
    <div class="section">
        <h4>{{ 'common.schemas' | sqxTranslate }}</h4>

        <sqx-form-hint>
            {{ 'rules.schemas.hint' | sqxTranslate }}
        </sqx-form-hint>

        <div *ngIf="!triggerForm.form.controls.handleAll.value">
            <div class="mb-2" *ngFor="let form of schemasForm.controls; let i = index">
                <sqx-content-changed-schema [schemas]="schemas" [form]="$any(form)" (remove)="removeSchema(i)"></sqx-content-changed-schema>
            </div>
        
            <div class="form-group row gx-2 align-items-center">
                <div class="col-3">
                    <div class="form-control preview">{{ 'common.schema' | sqxTranslate }}</div>
                </div>
        
                <div class="col-auto">
                    <div class="label text-muted">{{ 'rules.when' | sqxTranslate }}</div>
                </div>
        
                <div class="col">
                    <div class="form-control preview">{{ 'rules.condition' | sqxTranslate }}</div>
                </div>
        
                <div class="col-auto">
                    <button type="button" class="btn btn-success" (click)="addSchema()">
                        <i class="icon-add"></i>
                    </button>
                </div>
            </div>
        
            <div class="form-group" [formGroup]="triggerForm.form">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="handleAll" formControlName="handleAll">
                    <label class="form-check-label" for="handleAll">
                        {{ 'rules.triggerAll' | sqxTranslate }}
                    </label>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h4>{{ 'rules.referencedSchemas' | sqxTranslate }}</h4>

        <sqx-form-hint>
            {{ 'rules.referencedSchemasHint' | sqxTranslate }}
        </sqx-form-hint>
    
        <div class="mb-2" *ngFor="let form of referencedSchemasForm.controls; let i = index">
            <sqx-content-changed-schema [schemas]="schemas" [form]="$any(form)" (remove)="removeReferencedSchema(i)"></sqx-content-changed-schema>
        </div>
    
        <div class="form-group row gx-2 align-items-center">
            <div class="col-3">
                <div class="form-control preview">{{ 'common.schema' | sqxTranslate }}</div>
            </div>
    
            <div class="col-auto">
                <div class="label text-muted">{{ 'rules.when' | sqxTranslate }}</div>
            </div>
    
            <div class="col">
                <div class="form-control preview">{{ 'rules.condition' | sqxTranslate }}</div>
            </div>
    
            <div class="col-auto">
                <button type="button" class="btn btn-success" (click)="addReferencedSchema()">
                    <i class="icon-add"></i>
                </button>
            </div>
        </div>
    </div>
    
    <div class="help">
        <h4>{{ 'common.conditions' | sqxTranslate }}</h4>
    
        <sqx-form-hint>
            {{ 'rules.conditionHint2' | sqxTranslate }}
        </sqx-form-hint>
    
        <ul class="help-examples">
            <li class="help-example">
                {{ 'rules.conditions.event' | sqxTranslate }}:<br>

                <sqx-code>event.type == 'Created' || event.type == 'Published'</sqx-code>
            </li>
            <li class="help-example">
                {{ 'rules.conditions.contentValue' | sqxTranslate }}:<br>

                <sqx-code>event.data.important.iv === true</sqx-code>
            </li>
            <li class="help-example">
                {{ 'rules.conditions.updatedBy' | sqxTranslate }}:<br>
                
                <sqx-code>user.email === 'user@squidex.io'</sqx-code>
            </li>
        </ul>
    </div>
</ng-container>