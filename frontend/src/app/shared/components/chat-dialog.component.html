<sqx-modal-dialog size="lg" (dialogClose)="contentSelect.emit()" fullHeight="true" flexBody="true">
    <ng-container title>
        {{ 'chat.title' | sqxTranslate }}
    </ng-container>

    <ng-container content>
        <div class="scroll-container" #container>
            <sqx-chat-item *ngFor="let item of snapshot.chatItems; let isLast = last; let isFirst = first"
                [content]="item.content"
                (contentSelect)="contentSelect.emit($event)"
                [copyMode]="copyMode"
                (done)="setCompleted()"
                [isFirst]="isFirst"
                [isLast]="isLast"
                [type]="item.type"
                [user]="user">
            </sqx-chat-item>
        </div>
    </ng-container>

    <ng-container footer>
        <form (ngSubmit)="ask()">
            <div class="row row-cols-0 g-2">
                <div class="col">
                    <input class="form-control" #input
                        placeholder="{{ 'chat.prompt' | sqxTranslate }}"
                        sqxFocusOnInit
                        (ngModelChange)="setQuestion($event)"
                        [ngModel]="snapshot.chatQuestion"
                        [ngModelOptions]="{ standalone: true }" 
                        [disabled]="snapshot.isRunning" />
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-primary" [disabled]="snapshot.isRunning">
                        {{ 'chat.ask' | sqxTranslate }}
                    </button>
                </div>
            </div>
        </form>
    </ng-container>
</sqx-modal-dialog>
